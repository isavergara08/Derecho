<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Interactiva – Derecho</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(to bottom, #f7efff, #fcfaff);
    margin: 0;
    padding: 40px;
  }

  h1 {
    margin: 0;
    font-size: 32px;
  }

  /* HEADER */
  .header {
    background: #f3e8ff;
    border: 1px solid #c084fc;
    padding: 20px;
    border-radius: 22px;
    margin-bottom: 35px;
    box-shadow: 0 6px 12px rgba(0,0,0,0.05);
  }

  .progress-container {
    width: 100%;
    height: 14px;
    background: #ffffff;
    border-radius: 10px;
    border: 1px solid #d4b5ff;
    overflow: hidden;
    margin-top: 12px;
  }

  .progress-bar {
    height: 100%;
    background: #be70ff;
    width: 0%;
    transition: width 0.3s;
  }

  .menu button {
    border: none;
    padding: 8px 18px;
    border-radius: 20px;
    cursor: pointer;
    background: #e9d3ff;
    font-weight: bold;
    transition: 0.2s;
    margin-right: 10px;
  }

  .menu button:hover {
    background: #d9b8ff;
  }

  .menu button:nth-child(4) {
    background: #ffd9df;
    color: #ff5570;
  }

  /* GRID PERFECTO */
  .grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 35px;
    justify-items: center;
    width: 100%;
  }

  /* RESPONSIVE */
  @media (max-width: 900px) {
    .grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 600px) {
    .grid {
      grid-template-columns: 1fr;
    }
  }

  /* SEMESTRE 10 CENTRADO */
  .grid .card:last-child {
    grid-column: 2 / 3;
  }

  @media (max-width: 900px) {
    .grid .card:last-child {
      grid-column: auto;
    }
  }

  /* SEMESTER CARD */
  .card {
    background: #faf4ff;
    border-radius: 25px;
    padding: 20px;
    border: 2px solid #d9b8ff;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    width: 100%;
    max-width: 350px;
  }

  .card.complete {
    background: #f1e8ff;
    border-color: #a673ff;
  }

  .card h2 {
    margin: 0;
    font-size: 22px;
    color: #8238ff;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .tag {
    background: #9b53ff;
    color: white;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 11px;
  }

  /* SUBJECTS SUAVES */
  .subject {
    padding: 12px;
    margin-bottom: 10px;
    border-radius: 18px;
    background: #f6edff;
    font-size: 15px;
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    transition: 0.2s;
  }

  .subject:hover {
    background: #eedbff;
  }

  .subject.checked {
    background: #e3c7ff;
  }

  input[type="checkbox"] {
    transform: scale(1.2);
    cursor: pointer;
  }
</style>
</head>

<body>

<div class="header">
  <h1>Malla interactiva – Derecho</h1>
  <p style="margin-top:4px;">Créditos aprobados: <b id="approvedCredits">0</b> / 180</p>

  <div class="progress-container">
    <div id="progress" class="progress-bar"></div>
  </div>

  <div class="menu" style="margin-top:15px;">
    <button onclick="setFilter('all')">Todas</button>
    <button onclick="setFilter('approved')">Aprobadas</button>
    <button onclick="setFilter('pending')">Pendientes</button>
    <button onclick="resetAll()">Reiniciar</button>
  </div>
</div>

<div id="grid" class="grid"></div>

<script>
const TOTAL_CREDITS = 180;

const semesters = [
  { name: '1° semestre', credits: 17, subjects: [
    { name: 'Lógica y Retórica', credits: 3 },
    { name: 'Teoría General del Estado', credits: 3 },
    { name: 'Introducción al Derecho', credits: 4 },
    { name: 'Matemáticas', credits: 3 },
    { name: 'Escritura Universitaria I', credits: 2 },
    { name: 'CBU I', credits: 2 }
  ]},

  { name: '2° semestre', credits: 18, subjects: [
    { name: 'Hermenéutica Jurídica', credits: 3 },
    { name: 'Derecho Romano', credits: 3 },
    { name: 'Sociología Jurídica', credits: 3 },
    { name: 'Historia de las Instituciones Jurídicas', credits: 3 },
    { name: 'Escritura Universitaria II', credits: 2 },
    { name: 'CBU II', credits: 2 },
    { name: 'CBU III', credits: 2 }
  ]},

  { name: '3° semestre', credits: 18, subjects: [
    { name: 'Juez e Interpretación Constitucional', credits: 3 },
    { name: 'Obligaciones I', credits: 5 },
    { name: 'Derecho Constitucional', credits: 5 },
    { name: 'Propiedad y Derechos Reales', credits: 3 },
    { name: 'CBU IV', credits: 2 },
    { name: 'Examen de Ciclo I', credits: 0 }
  ]},

  { name: '4° semestre', credits: 18, subjects: [
    { name: 'Teoría Jurídica', credits: 5 },
    { name: 'Obligaciones II', credits: 5 },
    { name: 'Legislación y Políticas Públicas', credits: 3 },
    { name: 'Derecho Internacional', credits: 3 },
    { name: 'CBU V', credits: 2 }
  ]},

  { name: '5° semestre', credits: 18, subjects: [
    { name: 'Procedimientos', credits: 4 },
    { name: 'Relaciones Laborales', credits: 3 },
    { name: 'Derecho Comercial', credits: 3 },
    { name: 'Derecho Penal', credits: 3 },
    { name: 'Derecho Público Administrativo', credits: 3 },
    { name: 'CBU VI', credits: 2 },
    { name: 'Requisito de lectura en inglés', credits: 0 }
  ]},

  { name: '6° semestre', credits: 17, subjects: [
    { name: 'Protección Laboral', credits: 3 },
    { name: 'Pruebas', credits: 3 },
    { name: 'Contratos', credits: 5 },
    { name: 'Penal Especial', credits: 3 },
    { name: 'Argumentación en Procesos Civiles', credits: 3 }
  ]},

  { name: '7° semestre', credits: 18, subjects: [
    { name: 'Relaciones Familiares', credits: 4 },
    { name: 'Sociedades', credits: 3 },
    { name: 'Contratos Estatales', credits: 3 },
    { name: 'Proceso Ejecutivo y Declarativo', credits: 3 },
    { name: 'Argumentación en Procesos Penales', credits: 3 },
    { name: 'CBU VII', credits: 2 }
  ]},

  { name: '8° semestre', credits: 18, subjects: [
    { name: 'Acciones Públicas', credits: 3 },
    { name: 'Títulos Valores', credits: 3 },
    { name: 'Derecho Comparado', credits: 3 },
    { name: 'Ética Profesional', credits: 3 },
    { name: 'Derecho Internacional Privado', credits: 3 },
    { name: 'Materia Facultativa', credits: 3 }
  ]},

  { name: '9° semestre', credits: 19, subjects: [
    { name: 'Opciones de Grado', credits: 3 },
    { name: 'Consultorio Jurídico I', credits: 4 },
    { name: 'Materia Facultativa 1', credits: 3 },
    { name: 'Materia Facultativa 2', credits: 3 },
    { name: 'Materia Facultativa 3', credits: 3 },
    { name: 'Materia Facultativa 4', credits: 3 },
    { name: 'Requisito segunda lengua', credits: 0 }
  ]},

  { name: '10° semestre', credits: 19, subjects: [
    { name: 'Consultorio Jurídico II', credits: 4 },
    { name: 'Materia Facultativa 5', credits: 3 },
    { name: 'Curso Libre Elección 1', credits: 3 },
    { name: 'Curso Libre Elección 2', credits: 3 },
    { name: 'Curso Libre Elección 3', credits: 3 },
    { name: 'Curso Libre Elección 4', credits: 3 },
    { name: 'Examen de Facultad', credits: 0 }
  ]}
];

let approved = JSON.parse(localStorage.getItem('malla-aprobadas') || '{}');
let filter = 'all';

function toggle(name){
  approved[name] = !approved[name];
  localStorage.setItem('malla-aprobadas',JSON.stringify(approved));
  render();
}

function setFilter(f){
  filter=f;
  render();
}

function resetAll(){
  approved={};
  localStorage.removeItem('malla-aprobadas');
  render();
}

function totalApproved(){
  return semesters.reduce((sum, sem) =>
    sum + sem.subjects.reduce((s,sub)=> s + (approved[sub.name]?sub.credits:0),0)
  ,0);
}

function isSemesterComplete(sem){
  return sem.subjects.every(s => approved[s.name] || s.credits===0);
}

function semesterApprovedCredits(sem){
  return sem.subjects.reduce((s,sub)=> s + (approved[sub.name]?sub.credits:0),0);
}

function render(){
  const grid=document.getElementById('grid');
  grid.innerHTML='';

  const total = totalApproved();
  document.getElementById('approvedCredits').textContent=total;
  document.getElementById('progress').style.width=(total/TOTAL_CREDITS*100)+'%';

  semesters.forEach(sem=>{
    const card=document.createElement('div');
    card.className='card';
    if(isSemesterComplete(sem)) card.classList.add('complete');

    card.innerHTML=`
      <h2>${sem.name}
        ${isSemesterComplete(sem)?'<span class="tag">COMPLETO</span>':''}
      </h2>
      <p style="margin:8px 0 12px;"><b>${semesterApprovedCredits(sem)}</b> / ${sem.credits} créditos</p>
    `;

    sem.subjects
      .filter(sub=>{
        if(filter==='approved') return approved[sub.name];
        if(filter==='pending') return !approved[sub.name];
        return true;
      })
      .forEach(sub=>{
        const label=document.createElement('label');
        label.className='subject'+(approved[sub.name]?' checked':'');
        label.innerHTML=`
          <input type="checkbox" ${approved[sub.name]?'checked':''}
          onchange="toggle('${sub.name}')"> 
          ${sub.name} (${sub.credits})
        `;
        card.appendChild(label);
      });

    grid.appendChild(card);
  });
}

render();
</script>

</body>
</html>
